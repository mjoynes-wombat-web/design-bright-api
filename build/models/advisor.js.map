{"version":3,"sources":["../../src/models/advisor.js"],"names":["db","createAdvisor","email","firstName","lastName","position","yearsExperience","success","error","advisors","create","advisorStatus","then","createAdvisorResults","statusCode","message","catch","createAdvisorErr","errors","type"],"mappings":";;;;;;;AAAA;;IAAYA,E;;;;AAEL,MAAMC,wCAAgB,CAAC,EAAEC,KAAF,EAASC,SAAT,EAAoBC,QAApB,EAA8BC,QAA9B,EAAwCC,eAAxC,EAAD,EAA4DC,OAA5D,EAAqEC,KAArE,KAA+E;AAC1GR,KAAGS,QAAH,CAAYC,MAAZ,CACE;AACER,SADF;AAEEC,aAFF;AAGEC,YAHF;AAIEC,YAJF;AAKEM,mBAAe,SALjB;AAMEL;AANF,GADF,EAUGM,IAVH,CAUQC,wBAAwBN,QAC5B;AACEO,gBAAY,GADd;AAEED,wBAFF;AAGEE,aAAS;AAHX,GAD4B,CAVhC,EAiBGC,KAjBH,CAiBUC,gBAAD,IAAsB;AAC3B,QAAIA,iBAAiBC,MAAjB,CAAwB,CAAxB,EAA2BC,IAA3B,KAAoC,kBAAxC,EAA4D;AAC1D,aAAOX,MACL;AACEM,oBAAY,GADd;AAEEN,eAAOS,gBAFT;AAGEF,iBAAS;AAHX,OADK,CAAP;AAOD;AACD,WAAOP,MACL;AACEM,kBAAY,GADd;AAEEN,aAAOS,gBAFT;AAGEF,eAAS;AAHX,KADK,CAAP;AAOD,GAlCH;AAmCD,CApCM;;kBAsCQd,a","file":"advisor.js","sourcesContent":["import * as db from './db';\n\nexport const createAdvisor = ({ email, firstName, lastName, position, yearsExperience }, success, error) => {\n  db.advisors.create(\n    {\n      email,\n      firstName,\n      lastName,\n      position,\n      advisorStatus: 'pending',\n      yearsExperience,\n    },\n  )\n    .then(createAdvisorResults => success(\n      {\n        statusCode: 200,\n        createAdvisorResults,\n        message: 'You request to become an advisor has been submitted.',\n      },\n    ))\n    .catch((createAdvisorErr) => {\n      if (createAdvisorErr.errors[0].type === 'unique violation') {\n        return error(\n          {\n            statusCode: 409,\n            error: createAdvisorErr,\n            message: 'The email you provided has already been used.',\n          },\n        );\n      }\n      return error(\n        {\n          statusCode: 500,\n          error: createAdvisorErr,\n          message: 'There was an error submitting your request. Please try again.',\n        },\n      );\n    });\n};\n\nexport default createAdvisor;\n"]}